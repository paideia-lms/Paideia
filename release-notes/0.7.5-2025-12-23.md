# Release Notes - Paideia LMS v0.7.5

**Release Date:** December 23, 2025  
**Version:** 0.7.5  
**Type**: Infrastructure & Developer Experience  
**Impact**: High - Major infrastructure improvements for type safety, code quality, and media management  
**Changelog**: 0077, 0078, 0079, 0080

## Overview

Paideia LMS v0.7.5 introduces significant infrastructure improvements that enhance developer experience, code quality, and system reliability. This release brings a type-safe action RPC system for React Router actions, comprehensive media usage tracking, automatic version update notifications, and a custom project-specific linter. These improvements make development faster, safer, and more maintainable while providing better tools for administrators to manage the system.

---

## Major Features

### üîí Type-Safe Action RPC System

**Enhancement**: Complete type safety from server actions to client hooks with automatic validation and FormData handling.

**What's New**:
- **End-to-End Type Safety**: Full TypeScript inference from Zod schemas to React hooks
- **Automatic Validation**: Form data, route params, and HTTP methods validated automatically
- **Complex Data Support**: Handles nested objects, arrays, and Blob files seamlessly
- **Action-Based Routing**: Simplified action routing via search params with type safety
- **Developer Experience**: IntelliSense and autocomplete for all action parameters

**User Experience**:
- **For Developers**:
  - Write type-safe actions with full IntelliSense support
  - Automatic validation catches errors before they reach business logic
  - Consistent pattern across all route actions
  - Less boilerplate code, more productivity
  - Clear, prettified error messages for debugging

**Technical Highlights**:
- Custom `MyFormData` class handles complex nested structures
- Blob extraction and reference system for file uploads
- Automatic FormData serialization/deserialization
- Type-safe client hooks with loading states
- Support for all HTTP methods (POST, GET, PATCH, PUT, DELETE)

**Benefits**:
- ‚úÖ Eliminates runtime type errors through compile-time checks
- ‚úÖ Faster development with autocomplete and type hints
- ‚úÖ Consistent action handling pattern across the codebase
- ‚úÖ Automatic validation prevents invalid data from reaching business logic
- ‚úÖ Better error messages for faster debugging

---

### üîç Comprehensive Media Usage Tracking

**Enhancement**: Automatic discovery and tracking of all media file references across the entire system.

**What's New**:
- **Automatic Discovery**: Finds all media relationship fields across collections and globals
- **Complete Coverage**: Tracks direct, array, and nested media fields
- **Database Integration**: Maps to Drizzle schema for efficient queries
- **Usage Validation**: Prevents deletion of media files that are in use
- **Zero Configuration**: Works automatically with existing schema

**User Experience**:
- **For Administrators**:
  - System automatically knows where all media files are used
  - Prevents accidental deletion of files in use
  - Comprehensive media lifecycle management
  - No manual configuration needed

**Technical Highlights**:
- Recursive field discovery across all Payload collections and globals
- Drizzle schema mapping for database queries
- Handles three field types: direct, array, and nested
- Schema validation ensures only existing fields are queried
- Optimized queries using UNION ALL for efficiency

**Benefits**:
- ‚úÖ Prevents data loss by blocking deletion of files in use
- ‚úÖ Automatically adapts to schema changes
- ‚úÖ Efficient database queries for fast performance
- ‚úÖ Complete coverage across all collections and globals
- ‚úÖ Type-safe integration with generated schema

---

## Infrastructure Improvements

### üîî Version Update Notifications

**Enhancement**: Automatic version checking and update notifications for administrators.

**What's New**:
- **Automatic Checking**: Compares current version with latest on Docker Hub
- **Visual Alerts**: Clear notification when updates are available
- **Update Instructions**: Provides specific commands for Docker and other deployments
- **Non-Intrusive**: Alert doesn't block page usage

**User Experience**:
- **For Administrators**:
  - Visit System Information page to see update status
  - Clear visual indicator when new version is available
  - Quick copy-paste commands for Docker deployments
  - Link to upgrade documentation for other methods

**Technical Details**:
- Fetches tags from Docker Hub API
- Filters and validates semantic versions
- Compares with current package version
- Graceful error handling if check fails

**Benefits**:
- ‚úÖ Proactive update notifications
- ‚úÖ Clear, actionable update instructions
- ‚úÖ Differentiated instructions for different deployment methods
- ‚úÖ Resilient to network failures

---

### üõ°Ô∏è Custom Project-Specific Linter

**Enhancement**: Automated code quality checks that enforce project-specific patterns and prevent common mistakes.

**What's New**:
- **Rule-Based System**: Extensible configuration for custom linting rules
- **Dual Detection**: Supports both regex and AST-based pattern matching
- **Glob Patterns**: Flexible file inclusion/exclusion with glob patterns
- **Severity Levels**: Errors block commits, warnings provide guidance
- **Pre-Commit Integration**: Automatically runs on git commit

**User Experience**:
- **For Developers**:
  - Catches architectural violations before commit
  - Clear violation reporting with file paths and line numbers
  - Fast execution doesn't slow down development
  - Prevents common mistakes automatically

**Technical Highlights**:
- AST-based pattern matching for accuracy
- Regex-based patterns for simple checks
- Performance optimizations (parallel file reading, AST caching)
- Color-coded output (red for errors, yellow for warnings)
- Configurable log levels

**Initial Rules**:
- Bans `createLocalReq` in routes (except root)
- Bans direct `payload.find()` calls in routes
- Warns about deprecated form data parsing functions

**Benefits**:
- ‚úÖ Enforces architectural patterns automatically
- ‚úÖ Prevents common mistakes before they're committed
- ‚úÖ Fast execution for good developer experience
- ‚úÖ Extensible system for adding new rules
- ‚úÖ Clear feedback with exact file and line numbers

---

## Migration Guide

### No Database Migration Required

This release does not include any database migrations. All changes are backward compatible.

**Upgrade Steps**:
1. Upgrade to v0.7.5:
   ```bash
   git pull origin next  # or your branch
   ```

2. Install dependencies:
   ```bash
   bun install
   ```

3. Start the server:
   ```bash
   bun run dev
   ```

4. **Enjoy the Improvements**:
   - Type-safe actions work automatically in all routes
   - Media usage tracking is active for all media files
   - Version notifications appear on System Information page
   - Linter runs automatically on commit

**What Happens After Upgrade**:
- ‚úÖ All existing functionality remains unchanged
- ‚úÖ Type-safe action system available for new routes
- ‚úÖ Media deletion now checks for usage automatically
- ‚úÖ Version update notifications appear when available
- ‚úÖ Pre-commit linter enforces code quality
- ‚úÖ No configuration needed

---

## Breaking Changes

### None

This release contains no breaking changes. All changes are backward compatible:
- Type-safe action RPC system is opt-in for new routes
- Media usage tracking works automatically in background
- Version notifications are informational only
- Linter only affects new code patterns
- No API changes
- No database schema changes
- No configuration changes required

---

## Dependencies

### No Dependency Changes

All dependencies remain unchanged. The improvements use existing infrastructure:
- TypeScript compiler API (already in dependencies)
- React Router (already in use)
- Zod (already in use)
- nuqs (already in use)
- Drizzle ORM (already in use)

---

## Testing

### Type-Safe Action RPC System
- ‚úÖ Type inference works correctly from schema to hook
- ‚úÖ Form data validation catches invalid data
- ‚úÖ MyFormData handles complex nested structures
- ‚úÖ Blob extraction and restoration works correctly
- ‚úÖ Client hooks provide correct types and loading states
- ‚úÖ Action routing via search params works as expected

### Media Usage Tracking
- ‚úÖ All media fields discovered across collections and globals
- ‚úÖ Drizzle mapping correctly identifies tables and columns
- ‚úÖ Schema validation filters out non-existent fields
- ‚úÖ Usage queries find all references correctly
- ‚úÖ Prevents deletion of files in use
- ‚úÖ Handles direct, array, and nested fields

### Version Update Notifications
- ‚úÖ Version check fetches latest from Docker Hub
- ‚úÖ Semantic version comparison works correctly
- ‚úÖ Update alert displays when newer version available
- ‚úÖ Update instructions are clear and actionable
- ‚úÖ Graceful error handling if check fails

### Custom Linter
- ‚úÖ AST-based pattern matching works accurately
- ‚úÖ Regex patterns catch violations correctly
- ‚úÖ Pre-commit hook prevents violations from being committed
- ‚úÖ Performance optimizations keep execution fast
- ‚úÖ Clear violation reporting with file paths and lines

---

## Upgrade Instructions

### From v0.7.4 or Earlier

1. **Upgrade to v0.7.5**:
   ```bash
   git pull origin next  # or your branch
   ```

2. **Install dependencies**:
   ```bash
   bun install
   ```

3. **Start the server**:
   ```bash
   bun run dev
   ```

4. **Explore the Improvements**:
   - Check System Information page for version update notifications
   - Try creating a new route action using the type-safe RPC system
   - Attempt to delete a media file that's in use (system will prevent it)
   - Make a commit to see the linter in action

**No Additional Steps Required**:
- No database migrations needed
- No configuration changes needed
- No manual setup required
- Everything works automatically

---

## What's Next

This release significantly improves the developer experience and system reliability. Future releases will:

- Continue expanding type-safe patterns across the codebase
- Add more linter rules as patterns emerge
- Enhance media management features using the new tracking system
- Improve version update notifications with changelog links
- Build upon the type-safe action system for better API consistency

The infrastructure improvements in this release provide a solid foundation for faster, safer development. The type-safe action system makes it easier to build new features with confidence, while the media usage tracking ensures data integrity. The linter helps maintain code quality as the project grows.

---

## Thank You

Thank you for using Paideia LMS. This release brings significant infrastructure improvements that make development faster, safer, and more enjoyable. The type-safe action system eliminates entire classes of bugs, while the media usage tracking ensures data integrity. The version notifications and linter help maintain code quality and keep systems up to date.

For questions, issues, or contributions, please visit our GitHub repository: https://github.com/paideia-lms/paideia

---

## Complete Changelog Reference

This release includes changes from changelogs 0077, 0078, 0079, and 0080:

### Type-Safe Action RPC System (0079)
- **0079** - Type-Safe Factory: End-to-end type safety from server to client
- **0079** - MyFormData Class: Handles complex nested objects, Blobs, and null values
- **0079** - Automatic Validation: Form data, params, and method validation
- **0079** - Action-Based Routing: Simplified action routing with type safety
- **0079** - Client Hooks: Type-safe React hooks with submit functions
- **0079** - Type System: Complex type inference for full type safety

### Media Fields Discovery and Drizzle Mapping (0080)
- **0080** - Recursive Discovery: Automatically finds all media fields across collections and globals
- **0080** - Drizzle Mapping: Maps field paths to database table and column references
- **0080** - Usage Tracking: Enables comprehensive media usage tracking
- **0080** - Schema Validation: Validates table and field existence before use
- **0080** - Field Type Support: Handles direct, array, and nested field types

### Version Update Notification (0077)
- **0077** - Version Management: Internal function for checking latest version
- **0077** - Update Alerts: Visual notifications when updates are available
- **0077** - Update Instructions: Clear commands for Docker and other deployments
- **0077** - Error Handling: Graceful handling of version check failures

### Custom Project-Specific Linter (0078)
- **0078** - Rule-Based System: Extensible configuration for custom rules
- **0078** - AST Pattern Matching: Accurate pattern detection using TypeScript compiler API
- **0078** - Regex Patterns: Fast pattern detection for simple checks
- **0078** - Pre-Commit Integration: Automatically runs on git commit
- **0078** - Performance Optimizations: Parallel file reading and AST caching

**Full Changelog Details**: See changelog files:
- `changelogs/0077-2025-12-12-version-update-notification.md`
- `changelogs/0078-2025-12-12-custom-project-linter.md`
- `changelogs/0079-2025-12-23-type-safe-action-rpc-system.md`
- `changelogs/0080-2025-12-23-media-fields-discovery-and-drizzle-mapping.md`

**Previous Release**: See [v0.7.4 Release Notes](./0.7.4-2025-12-12.md) for previous features.

